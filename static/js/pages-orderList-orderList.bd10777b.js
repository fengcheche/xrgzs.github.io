(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-orderList-orderList"],{"2c70":function(t,e,a){"use strict";a.r(e);var n=a("f17c"),o=a("5a8a");for(var r in o)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(r);a("b27e");var i=a("f0c5"),s=a("4de3"),c=Object(i["a"])(o["default"],n["b"],n["c"],!1,null,"51bea3c8",null,!1,n["a"],void 0);"function"===typeof s["a"]&&Object(s["a"])(c),e["default"]=c.exports},"440c":function(t,e,a){var n=a("b0c8");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=a("4f06").default;o("1b75900e",n,!0,{sourceMap:!1,shadowMode:!1})},"4de3":function(t,e,a){"use strict";e["a"]=function(t){(t.options.wxs||(t.options.wxs={}))["wxs"]=function(t){return t.exports={toPrice:function(t){return t||(t=0),t.toFixed(2)},parsePrice:function(t){return t||(t=0),t.toFixed(2).split(".")},array_contain:function(t,e){for(var a=0;a<t.length;a++)if(t[a]==e)return!0;return!1},props_contain:function(t,e,a,n,o){var r="";e[a]=n;for(var i=0;i<o.length;i++)r+=o[i]+":"+e[o[i]]+";";r=r.substring(0,r.length-1);for(var s=!1,c=0;c<t.length;c++)if(r==t[c]){s=!0;break}return s},parseDiscount:function(t){return 0==t?"满额减":1==t?"满件减":2==t?"满额折":3==t?"满件折":""},parseDiscountMsg:function(t,e,a){return 0==t?"购满"+e+"元减"+a+"元":1==t?"购满"+e+"件减"+a+"元":2==t?"购满"+e+"元打"+a+"折":3==t?"购满"+e+"件打"+a+"折":""}},t.exports}({exports:{}})}},"5a8a":function(t,e,a){"use strict";a.r(e);var n=a("ac96"),o=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=o.a},ac96:function(t,e,a){"use strict";a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("14d9");var n=a("0e9d"),o=(a("a311"),{data:function(){return{list:[],current:1,pages:0,sts:0}},components:{},props:{},onLoad:function(t){t.sts?(this.setData({sts:t.sts}),this.loadOrderData(t.sts,1)):this.loadOrderData(0,1)},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){this.current<this.pages&&this.loadOrderData(this.sts,this.current+1)},onShareAppMessage:function(){},methods:{loadOrderData:function(t,e){var a=this;uni.showLoading();var o={url:"/p/myOrder/myOrder",method:"GET",data:{current:e,size:10,status:t},callBack:function(t){var e=[];1==t.current?e=t.records:(e=a.list,Array.prototype.push.apply(e,t.records)),a.setData({list:e,pages:t.pages,current:t.current}),uni.hideLoading()}};n.request(o)},onStsTap:function(t){var e=t.currentTarget.dataset.sts;this.setData({sts:e}),this.loadOrderData(e,1)},toDeliveryPage:function(t){uni.navigateTo({url:"/pages/express-delivery/express-delivery?orderNum="+t.currentTarget.dataset.ordernum})},onCancelOrder:function(t){var e=t.currentTarget.dataset.ordernum,a=this;uni.showModal({title:"",content:"要取消此订单？",confirmColor:"#3e62ad",cancelColor:"#3e62ad",cancelText:"否",confirmText:"是",success:function(t){if(t.confirm){uni.showLoading({mask:!0});var o={url:"/p/myOrder/cancel/"+e,method:"PUT",data:{},callBack:function(t){a.loadOrderData(a.sts,1),uni.hideLoading()}};n.request(o)}else t.cancel}})},onPayAgain:function(t){uni.showLoading({mask:!0});var e={url:"/p/order/pay",method:"POST",data:{payType:1,orderNumbers:t.currentTarget.dataset.ordernum},callBack:function(e){uni.hideLoading(),uni.requestPayment({timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.packageValue,signType:e.signType,paySign:e.paySign,success:function(){uni.navigateTo({url:"/pages/pay-result/pay-result?sts=1&orderNumbers="+t.currentTarget.dataset.ordernum})},fail:function(t){}})}};n.request(e)},gotoPay:function(t){uni.navigateTo({url:"/pages/pay/pay-order?orderNumber="+t.currentTarget.dataset.ordernum})},normalPay:function(t){uni.showLoading({mask:!0});var e={url:"/p/order/normalPay",method:"POST",data:{orderNumbers:t.currentTarget.dataset.ordernum},callBack:function(e){console.log("res",e),uni.hideLoading(),e?(uni.showToast({title:"模拟支付成功",icon:"none"}),setTimeout((function(){uni.navigateTo({url:"/pages/pay-result/pay-result?sts=1&orderNumbers="+t.currentTarget.dataset.ordernum})}),1200)):uni.showToast({title:"支付失败！",icon:"none"})}};n.request(e)},toOrderDetailPage:function(t){uni.navigateTo({url:"/pages/order-detail/order-detail?orderNum="+t.currentTarget.dataset.ordernum})},onConfirmReceive:function(t){var e=this;uni.showModal({title:"",content:"我已收到货？",confirmColor:"#eb2444",success:function(a){if(a.confirm){uni.showLoading({mask:!0});var o={url:"/p/myOrder/receipt/"+t.currentTarget.dataset.ordernum,method:"PUT",data:{},callBack:function(t){e.loadOrderData(e.sts,1),uni.hideLoading()}};n.request(o)}else a.cancel}})},delOrderList:function(t){var e=this;uni.showModal({title:"",content:"确定要删除此订单吗？",confirmColor:"#eb2444",success:function(a){if(a.confirm){var o=t.currentTarget.dataset.ordernum;uni.showLoading();var r={url:"/p/myOrder/"+o,method:"DELETE",data:{},callBack:function(t){e.loadOrderData(e.sts,1),uni.hideLoading()}};n.request(r)}else a.cancel&&console.log("用户点击取消")}})}}});e.default=o},b0c8:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'/* pages/orderList/orderList.wxss */uni-page-body[data-v-51bea3c8]{background-color:#f4f4f4;color:#333}body.?%PAGE?%[data-v-51bea3c8]{background-color:#f4f4f4}\r\n\r\n/* 头部菜单 */.order-tit[data-v-51bea3c8]{position:fixed;top:0;display:flex;justify-content:space-around;z-index:999;width:100%;height:%?100?%;line-height:%?100?%;background-color:#fff;border-bottom:%?2?% solid #f4f4f4}.order-tit uni-text[data-v-51bea3c8]{display:block;font-size:%?28?%;color:999;width:%?100?%;text-align:center}.order-tit uni-text.on[data-v-51bea3c8]{border-bottom:%?4?% solid #eb2444;color:#eb2444}\r\n\r\n/*  end 头部菜单 */.main[data-v-51bea3c8]{margin-top:%?100?%}\r\n\r\n/* 商品列表 */.prod-item[data-v-51bea3c8]{background-color:#fff;margin-top:%?15?%;font-size:%?28?%}.prod-item .item-cont .prod-pic uni-image[data-v-51bea3c8]{width:%?180?%;height:%?180?%}.prod-item .order-num[data-v-51bea3c8]{padding:%?20?% %?30?%;display:flex;justify-content:space-between;font-size:%?28?%}.order-state[data-v-51bea3c8]{display:flex;align-items:center;font-size:%?24?%}.prod-item .item-cont .categories[data-v-51bea3c8]{white-space:nowrap}.prod-item .item-cont[data-v-51bea3c8]{display:flex;align-items:center;padding:%?20?% %?30?%;border-radius:%?10?%;display:-webkit-flex;display:-webkit-box;display:-moz-box;display:-ms-flexbox;background:#fafafa}.prod-item .order-num .clear-btn[data-v-51bea3c8]{width:%?32?%;height:%?32?%;font-size:0;vertical-align:top;margin-left:%?42?%;position:relative}.prod-item .order-num .clear-btn[data-v-51bea3c8]::after{content:" ";display:block;position:absolute;left:-10px;top:%?0?%;width:1px;height:%?32?%;background:#ddd}.prod-item .order-num .clear-btn .clear-list-btn[data-v-51bea3c8]{width:100%;height:100%;vertical-align:middle}.prod-item .item-cont .prod-pic[data-v-51bea3c8]{font-size:0;display:inline-block;width:%?160?%;height:%?160?%;overflow:hidden;background:#fff;margin-right:%?16?%}.prod-item .item-cont .prod-pic uni-image[data-v-51bea3c8]{width:100%;height:100%}.prod-item .item-cont .prod-info[data-v-51bea3c8]{margin-left:%?10?%;font-size:%?28?%;width:100%;position:relative;height:%?160?%;-webkit-flex:1;-ms-flex:1;-webkit-box-flex:1;-moz-box-flex:1;flex:1}.prod-item .item-cont .prod-info .prodname[data-v-51bea3c8]{font-size:%?28?%;line-height:%?36?%;max-height:%?86?%;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;text-overflow:ellipsis;word-break:break-all}.prod-item .item-cont .prod-info .prod-info-cont[data-v-51bea3c8]{color:#999;line-height:%?40?%;margin-top:%?10?%;font-size:%?22?%;overflow:hidden;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;text-overflow:ellipsis;word-break:break-all}.prod-item  .total-num[data-v-51bea3c8]{text-align:right;padding:%?20?% %?30?%;font-size:%?28?%}.prod-item .price-nums .prodprice[data-v-51bea3c8]{color:#333;position:absolute;bottom:0}.prod-item  .price-nums .prodcount[data-v-51bea3c8]{position:absolute;bottom:%?5?%;right:0;color:#999;font-family:verdana}.prod-item .total-num .prodprice[data-v-51bea3c8]{display:inline-block;color:#333}.prod-item .total-num .prodcount[data-v-51bea3c8]{margin-right:%?20?%}.prod-item  .prod-foot[data-v-51bea3c8]{\r\n  /* padding: 20rpx 30rpx; */border-top:%?2?% solid #e6e6e6}.prod-item  .prod-foot .total[data-v-51bea3c8]{font-size:%?25?%;margin-bottom:%?20?%;padding-bottom:%?20?%;border-bottom:%?2?% solid #e9eaec}.prod-item  .prod-foot .btn[data-v-51bea3c8]{display:flex;align-items:center;justify-content:flex-end}.other-button-hover[data-v-51bea3c8]{background-color:#00f}.button-hover[data-v-51bea3c8]{background-color:red}\r\n\r\n/** 添加自定义button点击态样式类**/.button-hover[data-v-51bea3c8]{background-color:#00f}.button[data-v-51bea3c8]{margin-top:%?20?%;margin-bottom:%?20?%;margin-left:10px;font-size:%?26?%;background:#fff;padding:%?10?% %?30?%;border-radius:%?80?%;border:%?2?% solid #e1e1e1}.button[data-v-51bea3c8]:last-child{margin-right:%?10?%}.button.warn[data-v-51bea3c8]{color:#eb2444;border-color:#eb2444}\r\n\r\n/* end 商品列表 */.empty[data-v-51bea3c8]{font-size:%?24?%;margin-top:%?100?%;text-align:center;color:#999;height:%?300?%;line-height:%?300?%}\r\n\r\n/* 根据状态显示不同的颜色 */.order-state .order-sts.red[data-v-51bea3c8]{color:#eb2444}.order-state .order-sts.gray[data-v-51bea3c8]{color:#999}',""]),t.exports=e},b27e:function(t,e,a){"use strict";var n=a("440c"),o=a.n(n);o.a},f17c:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"order-tit"},[a("v-uni-text",{class:0==t.sts?"on":"",attrs:{"data-sts":"0"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onStsTap.apply(void 0,arguments)}}},[t._v("全部")]),a("v-uni-text",{class:1==t.sts?"on":"",attrs:{"data-sts":"1"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onStsTap.apply(void 0,arguments)}}},[t._v("待支付")]),a("v-uni-text",{class:2==t.sts?"on":"",attrs:{"data-sts":"2"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onStsTap.apply(void 0,arguments)}}},[t._v("待发货")]),a("v-uni-text",{class:3==t.sts?"on":"",attrs:{"data-sts":"3"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onStsTap.apply(void 0,arguments)}}},[t._v("待收货")]),a("v-uni-text",{class:5==t.sts?"on":"",attrs:{"data-sts":"5"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onStsTap.apply(void 0,arguments)}}},[t._v("已完成")])],1),a("v-uni-view",{staticClass:"main"},[0==t.list.length?a("v-uni-view",{staticClass:"empty"},[t._v("还没有任何相关订单")]):t._e(),t._l(t.list,(function(e,n){return[a("v-uni-view",{key:n+"_0",staticClass:"prod-item"},[a("v-uni-view",{staticClass:"order-num"},[a("v-uni-text",[t._v("订单编号："+t._s(e.orderNumber))]),a("v-uni-view",{staticClass:"order-state"},[a("v-uni-text",{class:"order-sts  "+(1==e.status?"red":"")+"  "+(5==e.status||6==e.status?"gray":"")},[t._v(t._s(1==e.status?"待支付":2==e.status?"待发货":3==e.status?"待收货":5==e.status?"已完成":"已取消"))]),5==e.status||6==e.status?a("v-uni-view",{staticClass:"clear-btn"},[a("v-uni-image",{staticClass:"clear-list-btn",attrs:{src:"/static/images/icon/clear-his.png","data-ordernum":e.orderNumber},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delOrderList.apply(void 0,arguments)}}})],1):t._e()],1)],1),1==e.orderItemDtos.length?[t._l(e.orderItemDtos,(function(n,o){return[a("v-uni-view",[a("v-uni-view",{staticClass:"item-cont",attrs:{"data-ordernum":e.orderNumber},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toOrderDetailPage.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"prod-pic"},[a("v-uni-image",{attrs:{src:n.pic}})],1),a("v-uni-view",{staticClass:"prod-info"},[a("v-uni-view",{staticClass:"prodname"},[t._v(t._s(n.prodName))]),a("v-uni-view",{staticClass:"prod-info-cont"},[t._v(t._s(n.skuName))]),a("v-uni-view",{staticClass:"price-nums"},[a("v-uni-text",{staticClass:"prodprice"},[a("v-uni-text",{staticClass:"symbol"},[t._v("￥")]),a("v-uni-text",{staticClass:"big-num"},[t._v(t._s(t.wxs.parsePrice(n.price)[0]))]),a("v-uni-text",{staticClass:"small-num"},[t._v("."+t._s(t.wxs.parsePrice(n.price)[1]))])],1),a("v-uni-text",{staticClass:"prodcount"},[t._v("x"+t._s(n.prodCount))])],1)],1)],1)],1)]}))]:[a("v-uni-view",{staticClass:"item-cont",attrs:{"data-ordernum":e.orderNumber},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toOrderDetailPage.apply(void 0,arguments)}}},[a("v-uni-scroll-view",{staticClass:"categories",attrs:{"scroll-x":"true","scroll-left":"0","scroll-with-animation":"false"}},[t._l(e.orderItemDtos,(function(t,e){return[a("v-uni-view",{key:e+"_0",staticClass:"prod-pic"},[a("v-uni-image",{attrs:{src:t.pic}})],1)]}))],2)],1)],a("v-uni-view",{staticClass:"total-num"},[a("v-uni-text",{staticClass:"prodcount"},[t._v("共1件商品")]),a("v-uni-view",{staticClass:"prodprice"},[t._v("合计："),a("v-uni-text",{staticClass:"symbol"},[t._v("￥")]),a("v-uni-text",{staticClass:"big-num"},[t._v(t._s(t.wxs.parsePrice(e.actualTotal)[0]))]),a("v-uni-text",{staticClass:"small-num"},[t._v("."+t._s(t.wxs.parsePrice(e.actualTotal)[1]))])],1)],1),a("v-uni-view",{staticClass:"prod-foot"},[a("v-uni-view",{staticClass:"btn"},[1==e.status?a("v-uni-text",{staticClass:"button",attrs:{"data-ordernum":e.orderNumber,"hover-class":"none"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onCancelOrder.apply(void 0,arguments)}}},[t._v("取消订单")]):t._e(),1==e.status?a("v-uni-text",{staticClass:"button warn",attrs:{"data-ordernum":e.orderNumber,"hover-class":"none"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotoPay.apply(void 0,arguments)}}},[t._v("付款")]):t._e(),3==e.status||5==e.status?a("v-uni-text",{staticClass:"button",attrs:{"data-ordernum":e.orderNumber,"hover-class":"none"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toDeliveryPage.apply(void 0,arguments)}}},[t._v("查看物流")]):t._e(),3==e.status?a("v-uni-text",{staticClass:"button warn",attrs:{"data-ordernum":e.orderNumber,"hover-class":"none"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onConfirmReceive.apply(void 0,arguments)}}},[t._v("确认收货")]):t._e()],1)],1)],2)]}))],2)],1)},o=[]}}]);