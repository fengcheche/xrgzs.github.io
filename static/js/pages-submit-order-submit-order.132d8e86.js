(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-submit-order-submit-order"],{"27cb":function(t,e,a){"use strict";a.r(e);var i=a("2901"),o=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=o.a},2901:function(t,e,a){"use strict";a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("a9e3");var i=a("0e9d"),o={data:function(){return{stsType:4}},components:{},props:{item:Object,type:Number,order:Boolean,canUse:Boolean,index:Number,showTimeType:Number},beforeMount:function(){},methods:{receiveCoupon:function(){var t=this,e=this.item.couponId;i.request({url:"/p/myCoupon/receive",method:"POST",data:e,callBack:function(){var e=t.item;e.canReceive=!1,t.setData({item:e})}})},checkCoupon:function(t){this.$emit("checkCoupon",{detail:{couponId:t.currentTarget.dataset.couponid}})},useCoupon:function(){var t="/pages/prod-classify/prod-classify?sts="+this.stsType,e=this.item.couponId;e&&(t+="&tagid="+e+"&title=优惠券活动商品"),uni.navigateTo({url:t})}}};e.default=o},"300d":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{class:"coupon-item "+(t.canUse?"":"gray")},[a("v-uni-view",{staticClass:"left"},[1==t.item.couponType?a("v-uni-view",{staticClass:"num"},[t._v("￥"),a("v-uni-text",{staticClass:"coupon-price"},[t._v(t._s(t.item.reduceAmount))])],1):t._e(),2==t.item.couponType?a("v-uni-view",{staticClass:"num"},[a("v-uni-text",{staticClass:"coupon-price"},[t._v(t._s(t.item.couponDiscount))]),t._v("折")],1):t._e(),a("v-uni-view",{staticClass:"condition"},[t._v("满"+t._s(t.item.cashCondition)+"元可用")])],1),a("v-uni-view",{staticClass:"right"},[a("v-uni-view",{staticClass:"c-des"},[a("v-uni-text",{staticClass:"c-type"},[t._v(t._s(0==t.item.suitableProdType?"通用":"商品"))]),t._v(t._s(0==t.item.suitableProdType?"全场通用":"指定商品可用"))],1),a("v-uni-view",{staticClass:"c-date"},[1==t.showTimeType&&2==t.item.couponType?a("v-uni-text",{staticClass:"c-data-info"},[t._v("领券"+t._s(t.item.validDays)+"天后失效")]):a("v-uni-text",{staticClass:"c-data-info"},[t._v(t._s(t.item.startTime)+"~"+t._s(t.item.endTime))]),t.item.canReceive&&!t.order?a("v-uni-text",{staticClass:"c-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.receiveCoupon.apply(void 0,arguments)}}},[t._v("立即领取")]):t._e(),t.item.canReceive||t.order?t._e():a("v-uni-text",{staticClass:"c-btn get-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.useCoupon.apply(void 0,arguments)}}},[t._v("立即使用")])],1),t.order&&t.canUse?a("v-uni-view",{staticClass:"sel-btn"},[a("v-uni-checkbox",{attrs:{color:"#eb2444","data-couponid":t.item.couponId,checked:t.item.choose},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.checkCoupon.apply(void 0,arguments)}}})],1):t._e()],1),1==t.type?a("v-uni-image",{staticClass:"tag-img",attrs:{src:"/static/images/icon/coupon-used.png"}}):t._e(),2==t.type?a("v-uni-image",{staticClass:"tag-img",attrs:{src:"/static/images/icon/coupon-ot.png"}}):t._e()],1)},o=[]},"3d58":function(t,e,a){"use strict";a.r(e);var i=a("f09b"),o=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=o.a},4897:function(t,e,a){"use strict";a.r(e);var i=a("8535"),o=a("3d58");for(var n in o)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(n);a("e242");var s=a("f0c5"),r=a("84eb"),d=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"28a9ea61",null,!1,i["a"],void 0);"function"===typeof r["a"]&&Object(r["a"])(d),e["default"]=d.exports},"550f":function(t,e,a){"use strict";a.r(e);var i=a("300d"),o=a("27cb");for(var n in o)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(n);a("d5b2");var s=a("f0c5"),r=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"5ada0743",null,!1,i["a"],void 0);e["default"]=r.exports},8282:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'/* pages/submit-order/submit-order.wxss */uni-page-body[data-v-28a9ea61]{background:#f4f4f4}body.?%PAGE?%[data-v-28a9ea61]{background:#f4f4f4}\r\n\r\n/* 收货地址 */.submit-order[data-v-28a9ea61]{margin-bottom:%?100?%;padding-bottom:%?160?%}.submit-order .delivery-addr[data-v-28a9ea61]{position:relative;background:#fff}.delivery-addr .addr-bg .add-addr .plus-sign[data-v-28a9ea61]{color:#eb2444;border:%?2?% solid #eb2444;padding:%?0?% %?6?%;margin-right:%?10?%}.delivery-addr .addr-bg[data-v-28a9ea61]{padding:0 %?30?%}.delivery-addr .addr-bg.whole[data-v-28a9ea61]{padding:0 %?39?% 0 %?77?%}.delivery-addr .addr-bg .add-addr[data-v-28a9ea61]{font-size:%?28?%;color:#666;display:flex;align-items:center;padding:%?30?% 0}.submit-order .delivery-addr .addr-icon[data-v-28a9ea61]{width:%?32?%;height:%?32?%;display:block;position:absolute;left:%?30?%;top:%?24?%}.submit-order .delivery-addr .addr-icon uni-image[data-v-28a9ea61]{width:100%;height:100%}.submit-order .delivery-addr .user-info[data-v-28a9ea61]{padding-top:%?20?%;line-height:%?48?%;word-wrap:break-word;word-break:break-all;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical}.submit-order .delivery-addr .user-info .item[data-v-28a9ea61]{font-size:%?30?%;margin-right:%?30?%;vertical-align:top;display:inline-block}.submit-order .delivery-addr .addr[data-v-28a9ea61]{font-size:%?26?%;line-height:%?36?%;color:#999;width:90%;padding-bottom:%?20?%;margin-top:%?15?%;word-wrap:break-word}.submit-order .delivery-addr .arrow[data-v-28a9ea61]{width:%?15?%;height:%?15?%;border-top:%?2?% solid #777;border-right:%?2?% solid #777;-webkit-transform:rotate(45deg);transform:rotate(45deg);position:absolute;right:%?30?%;top:%?60?%}.submit-order .delivery-addr .arrow.empty[data-v-28a9ea61]{top:%?39?%}.addr-bg .add-addr .plus-sign-img[data-v-28a9ea61]{width:%?32?%;height:%?32?%;font-size:0;margin-right:%?10?%}.addr-bg .add-addr .plus-sign-img uni-image[data-v-28a9ea61]{width:100%;height:100%}\r\n\r\n/* 商品列表 */.prod-item[data-v-28a9ea61]{background-color:#fff;margin-top:%?15?%;font-size:%?28?%}.prod-item .item-cont .prod-pic uni-image[data-v-28a9ea61]{width:%?180?%;height:%?180?%}.prod-item .order-num[data-v-28a9ea61]{padding:%?20?% %?30?%;display:flex;justify-content:space-between;font-size:%?28?%}.order-state[data-v-28a9ea61]{display:flex;align-items:center}.prod-item .item-cont[data-v-28a9ea61]{display:flex;align-items:center;padding:%?30?%;border-bottom:%?2?% solid #f1f1f1}.prod-item .order-num .clear-btn[data-v-28a9ea61]{width:%?32?%;height:%?32?%;font-size:0;vertical-align:top;margin-top:%?6?%;margin-left:%?42?%;position:relative}.prod-item .order-num .clear-btn[data-v-28a9ea61]::after{content:" ";display:block;position:absolute;left:-10px;top:1px;width:1px;height:12px;background:#ddd}.prod-item .order-num .clear-btn .clear-list-btn[data-v-28a9ea61]{width:100%;height:100%;vertical-align:middle}.prod-item .item-cont .prod-pic[data-v-28a9ea61]{font-size:0;display:block;width:%?160?%;height:%?160?%;overflow:hidden;background:#fff;margin-right:%?16?%}.prod-item .item-cont .prod-pic uni-image[data-v-28a9ea61]{width:100%;height:100%}.prod-item .item-cont .prod-info[data-v-28a9ea61]{margin-left:%?10?%;font-size:%?28?%;width:100%;position:relative;height:%?160?%;-webkit-flex:1;-ms-flex:1;-webkit-box-flex:1;-moz-box-flex:1;flex:1}.prod-item .item-cont .prod-info .prodname[data-v-28a9ea61]{font-size:%?28?%;line-height:%?40?%;max-height:%?86?%;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;text-overflow:ellipsis;word-break:break-all}.prod-item .item-cont .prod-info .prod-info-cont[data-v-28a9ea61]{color:#999;line-height:%?40?%;margin-top:%?10?%;font-size:%?22?%;overflow:hidden;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;text-overflow:ellipsis;word-break:break-all}.prod-item  .total-num[data-v-28a9ea61]{text-align:right;padding:%?20?% %?30?%;font-size:%?28?%}.prod-item .price-nums .prodprice[data-v-28a9ea61]{position:absolute;bottom:0}.prod-item  .price-nums .prodcount[data-v-28a9ea61]{position:absolute;bottom:%?5?%;right:0;color:#999;font-family:verdana}.prod-item .total-num .prodprice[data-v-28a9ea61]{display:inline-block;color:#333}.prod-item .total-num .prodcount[data-v-28a9ea61]{margin-right:%?20?%}\r\n\r\n/* \r\n订单信息 */.order-msg[data-v-28a9ea61]{background:#fff;margin-top:%?15?%;padding:0 %?30?%;font-size:%?28?%}.order-msg .msg-item[data-v-28a9ea61]{border-top:%?2?% solid #f1f1f1}.order-msg .msg-item[data-v-28a9ea61]:first-child{border:0}.order-msg .msg-item .item[data-v-28a9ea61]{position:relative;display:flex;padding:%?16?% 0;align-items:center}.order-msg .msg-item .item.payment[data-v-28a9ea61]{border-top:%?2?% solid #f1f1f1;color:#eb2444}.order-msg .msg-item .item .item-tit[data-v-28a9ea61]{line-height:%?48?%}.order-msg .msg-item .item .item-txt[data-v-28a9ea61]{-webkit-box-flex:1;-moz-box-flex:1;flex:1;font-family:arial;max-height:%?48?%;overflow:hidden;line-height:%?48?%;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;text-overflow:ellipsis;word-break:break-all}.order-msg .msg-item .item .item-txt.price[data-v-28a9ea61]{padding:0}.order-msg .msg-item .item.coupon[data-v-28a9ea61]{border-bottom:%?2?% solid #e1e1e1}.order-msg .msg-item .item uni-input[data-v-28a9ea61]{flex:1}.order-msg .msg-item .item  .coupon-btn[data-v-28a9ea61]{display:block;margin:0 %?30?%;line-height:%?28?%;color:#999}.order-msg .msg-item .item .item-txt.price[data-v-28a9ea61]{text-align:right}.order-msg .msg-item .item .arrow[data-v-28a9ea61]{width:%?15?%;height:%?15?%;border-top:%?2?% solid #999;border-right:%?2?% solid #999;-webkit-transform:rotate(45deg);transform:rotate(45deg);position:absolute;right:%?0?%}\r\n\r\n/* 底部栏 */.submit-order-footer[data-v-28a9ea61]{position:fixed;bottom:0;width:100%;max-width:%?750?%;background:#fff;margin:auto;display:-webkit-flex;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:flex;font-size:%?26?%;box-shadow:0 -1px 3px rgba(0,0,0,.05)}.submit-order-footer .sub-order[data-v-28a9ea61]{flex:1;margin:0 %?30?%;line-height:%?100?%;display:block;text-align:left;font-size:%?28?%}.submit-order-footer .footer-box[data-v-28a9ea61]{padding:0 %?10?%;width:%?200?%;background:#eb2444;text-align:center;line-height:%?100?%;color:#fff}.submit-order-footer .sub-order .item-txt .price[data-v-28a9ea61]{display:inline;color:#eb2444;font-size:%?28?%}.clearfix[data-v-28a9ea61]:after{content:" ";display:table;clear:both}\r\n\r\n/** 优惠券弹窗 **/.popup-hide[data-v-28a9ea61]{position:fixed;top:0;bottom:0;left:0;right:0;z-index:999;background-color:rgba(0,0,0,.3)}.popup-box[data-v-28a9ea61]{position:absolute;bottom:0;width:100%;height:80%;overflow:hidden;background-color:#fff}.popup-tit[data-v-28a9ea61]{position:relative;height:46px;line-height:46px;padding-left:10px;font-size:16px;color:#333;font-weight:700}.close[data-v-28a9ea61]{color:#aaa;border-radius:12px;line-height:20px;text-align:center;height:20px;width:20px;font-size:18px;padding:1px;top:10px;right:10px;position:absolute}.close[data-v-28a9ea61]::before{content:"\\2716"}.coupon-tabs[data-v-28a9ea61]{display:flex;font-size:14px;justify-content:space-around;border-bottom:1px solid #f2f2f2}.coupon-tab[data-v-28a9ea61]{padding:10px 0}.coupon-tab.on[data-v-28a9ea61]{border-bottom:2px solid #eb2444;font-weight:600}.popup-cnt[data-v-28a9ea61]{height:calc(100% - 88px);overflow:auto;padding:0 10px;background:#f4f4f4}.coupon-ok[data-v-28a9ea61]{position:fixed;bottom:0;width:100%;height:60px;line-height:50px;font-size:14px;text-align:center;box-shadow:0 -1px 1px #ddd;background:hsla(0,0%,100%,.9)}.coupon-ok uni-text[data-v-28a9ea61]{border-radius:20px;display:inline-block;height:20px;line-height:20px;width:%?450?%;padding:7px;background:-o-linear-gradient(right,#f45c43,#eb2444);background:linear-gradient(right,#f45c43,#eb2444);background:-webkit-linear-gradient(right,#f45c43,#eb2444);color:#fff;box-shadow:-1px 3px 3px #aaa}.botm-empty[data-v-28a9ea61]{height:60px}\r\n\r\n/*checkbox 选项框大小  */uni-checkbox .wx-checkbox-input[data-v-28a9ea61]{border-radius:50%;width:%?35?%;height:%?35?%}\r\n\r\n/*checkbox选中后样式  */uni-checkbox .wx-checkbox-input.wx-checkbox-input-checked[data-v-28a9ea61]{background:#eb2444;border-color:#eb2444}\r\n\r\n/*checkbox选中后图标样式  */uni-checkbox .wx-checkbox-input.wx-checkbox-input-checked[data-v-28a9ea61]::before{text-align:center;font-size:%?22?%;color:#fff;background:transparent;transform:translate(-50%,-50%) scale(1);-webkit-transform:translate(-50%,-50%) scale(1)}',""]),t.exports=e},"84eb":function(t,e,a){"use strict";e["a"]=function(t){(t.options.wxs||(t.options.wxs={}))["wxs"]=function(t){return t.exports={toPrice:function(t){return t||(t=0),t.toFixed(2)},parsePrice:function(t){return t||(t=0),t.toFixed(2).split(".")},array_contain:function(t,e){for(var a=0;a<t.length;a++)if(t[a]==e)return!0;return!1},props_contain:function(t,e,a,i,o){var n="";e[a]=i;for(var s=0;s<o.length;s++)n+=o[s]+":"+e[o[s]]+";";n=n.substring(0,n.length-1);for(var r=!1,d=0;d<t.length;d++)if(n==t[d]){r=!0;break}return r},parseDiscount:function(t){return 0==t?"满额减":1==t?"满件减":2==t?"满额折":3==t?"满件折":""},parseDiscountMsg:function(t,e,a){return 0==t?"购满"+e+"元减"+a+"元":1==t?"购满"+e+"件减"+a+"元":2==t?"购满"+e+"元打"+a+"折":3==t?"购满"+e+"件打"+a+"折":""}},t.exports}({exports:{}})}},8535:function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={coupon:a("550f").default},o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"submit-order"},[a("v-uni-view",{staticClass:"delivery-addr ",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toAddrListPage.apply(void 0,arguments)}}},[t.userAddr?t._e():a("v-uni-view",{staticClass:"addr-bg "},[a("v-uni-view",{staticClass:"add-addr"},[a("v-uni-view",{staticClass:"plus-sign-img"},[a("v-uni-image",{attrs:{src:"/static/images/icon/plus-sign.png"}})],1),a("v-uni-text",[t._v("新增收货地址")])],1),a("v-uni-view",{staticClass:"arrow empty"})],1),t.userAddr?a("v-uni-view",{staticClass:"addr-bg whole"},[a("v-uni-view",{staticClass:"addr-icon"},[a("v-uni-image",{attrs:{src:"/static/images/icon/addr.png"}})],1),a("v-uni-view",{staticClass:"user-info"},[a("v-uni-text",{staticClass:"item"},[t._v(t._s(t.userAddr.receiver))]),a("v-uni-text",{staticClass:"item"},[t._v(t._s(t.userAddr.mobile))])],1),a("v-uni-view",{staticClass:"addr"},[t._v(t._s(t.userAddr.province)+t._s(t.userAddr.city)+t._s(t.userAddr.area)+t._s(t.userAddr.addr))]),a("v-uni-view",{staticClass:"arrow"})],1):t._e()],1),a("v-uni-view",{staticClass:"prod-item"},[t._l(t.orderItems,(function(e,i){return[a("v-uni-view",{key:i+"_0",staticClass:"item-cont",attrs:{"data-ordernum":e.primaryOrderNo},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toOrderDetailPage.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"prod-pic"},[a("v-uni-image",{attrs:{src:e.pic}})],1),a("v-uni-view",{staticClass:"prod-info"},[a("v-uni-view",{staticClass:"prodname"},[t._v(t._s(e.prodName))]),a("v-uni-view",{staticClass:"prod-info-cont"},[t._v(t._s(e.skuName))]),a("v-uni-view",{staticClass:"price-nums"},[a("v-uni-text",{staticClass:"prodprice"},[a("v-uni-text",{staticClass:"symbol"},[t._v("￥")]),a("v-uni-text",{staticClass:"big-num"},[t._v(t._s(t.wxs.parsePrice(e.price)[0]))]),a("v-uni-text",{staticClass:"small-num"},[t._v("."+t._s(t.wxs.parsePrice(e.price)[1]))])],1),a("v-uni-text",{staticClass:"prodcount"},[t._v("x"+t._s(e.prodCount))])],1)],1)],1)]})),a("v-uni-view",{staticClass:"total-num"},[a("v-uni-text",{staticClass:"prodcount"},[t._v("共"+t._s(t.totalCount)+"件商品")]),a("v-uni-view",{staticClass:"prodprice"},[t._v("合计："),a("v-uni-text",{staticClass:"symbol"},[t._v("￥")]),a("v-uni-text",{staticClass:"big-num"},[t._v(t._s(t.wxs.parsePrice(t.total)[0]))]),a("v-uni-text",{staticClass:"small-num"},[t._v("."+t._s(t.wxs.parsePrice(t.total)[1]))])],1)],1)],2),a("v-uni-view",{staticClass:"order-msg"},[a("v-uni-view",{staticClass:"msg-item"},[a("v-uni-view",{staticClass:"item"},[a("v-uni-text",[t._v("买家留言：")]),a("v-uni-input",{attrs:{placeholder:"给卖家留言"},model:{value:t.remarks,callback:function(e){t.remarks=e},expression:"remarks"}})],1)],1)],1),a("v-uni-view",{staticClass:"order-msg"},[a("v-uni-view",{staticClass:"msg-item"},[a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"item-tit"},[t._v("订单总额：")]),a("v-uni-view",{staticClass:"item-txt price"},[a("v-uni-text",{staticClass:"symbol"},[t._v("￥")]),a("v-uni-text",{staticClass:"big-num"},[t._v(t._s(t.wxs.parsePrice(t.total)[0]))]),a("v-uni-text",{staticClass:"small-num"},[t._v("."+t._s(t.wxs.parsePrice(t.total)[1]))])],1)],1),a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"item-tit"},[t._v("运费：")]),a("v-uni-view",{staticClass:"item-txt price"},[a("v-uni-text",{staticClass:"symbol"},[t._v("￥")]),a("v-uni-text",{staticClass:"big-num"},[t._v(t._s(t.wxs.parsePrice(t.transfee)[0]))]),a("v-uni-text",{staticClass:"small-num"},[t._v("."+t._s(t.wxs.parsePrice(t.transfee)[1]))])],1)],1),a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"item-tit"},[t._v("优惠金额：")]),a("v-uni-view",{staticClass:"item-txt price"},[a("v-uni-text",{staticClass:"symbol"},[t._v("-￥")]),a("v-uni-text",{staticClass:"big-num"},[t._v(t._s(t.wxs.parsePrice(t.shopReduce)[0]))]),a("v-uni-text",{staticClass:"small-num"},[t._v("."+t._s(t.wxs.parsePrice(t.shopReduce)[1]))])],1)],1),a("v-uni-view",{staticClass:"item payment"},[a("v-uni-view",{staticClass:"item-txt price"},[t._v("小计："),a("v-uni-text",{staticClass:"symbol"},[t._v("￥")]),a("v-uni-text",{staticClass:"big-num"},[t._v(t._s(t.wxs.parsePrice(t.actualTotal)[0]))]),a("v-uni-text",{staticClass:"small-num"},[t._v("."+t._s(t.wxs.parsePrice(t.actualTotal)[1]))])],1)],1)],1)],1)],1),a("v-uni-view",{staticClass:"submit-order-footer"},[a("v-uni-view",{staticClass:"sub-order"},[a("v-uni-view",{staticClass:"item-txt"},[t._v("合计："),a("v-uni-view",{staticClass:"price"},[a("v-uni-text",{staticClass:"symbol"},[t._v("￥")]),a("v-uni-text",{staticClass:"big-num"},[t._v(t._s(t.wxs.parsePrice(t.actualTotal)[0]))]),a("v-uni-text",{staticClass:"small-num"},[t._v("."+t._s(t.wxs.parsePrice(t.actualTotal)[1]))])],1)],1)],1),a("v-uni-view",{staticClass:"footer-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toPay.apply(void 0,arguments)}}},[t._v("提交订单")])],1)],1),t.popupShow?a("v-uni-view",{staticClass:"popup-hide"},[a("v-uni-view",{staticClass:"popup-box"},[a("v-uni-view",{staticClass:"popup-tit"},[a("v-uni-text",[t._v("优惠券")]),a("v-uni-text",{staticClass:"close",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closePopup.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"coupon-tabs"},[a("v-uni-view",{class:"coupon-tab "+(1==t.couponSts?"on":""),attrs:{"data-sts":"1"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeCouponSts.apply(void 0,arguments)}}},[t._v("可用优惠券("+t._s(t.coupons.canUseCoupons.length?t.coupons.canUseCoupons.length:0)+")")]),a("v-uni-view",{class:"coupon-tab "+(2==t.couponSts?"on":""),attrs:{"data-sts":"2"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeCouponSts.apply(void 0,arguments)}}},[t._v("不可用优惠券("+t._s(t.coupons.unCanUseCoupons.length?t.coupons.unCanUseCoupons.length:0)+")")])],1),a("v-uni-view",{staticClass:"popup-cnt"},[t._l(t.coupons.canUseCoupons,(function(e,i){return 1==t.couponSts?[a("coupon",{key:i+"_0",attrs:{item:e,order:"true",canUse:"true"},on:{checkCoupon:function(e){arguments[0]=e=t.$handleEvent(e),t.checkCoupon.apply(void 0,arguments)}}})]:t._e()})),t._l(t.coupons.unCanUseCoupons,(function(e,i){return 2==t.couponSts?[a("coupon",{key:i+"_0",attrs:{item:e,order:"true",canUse:"false"}})]:t._e()})),a("v-uni-view",{staticClass:"botm-empty"})],2),1==t.couponSts?a("v-uni-view",{staticClass:"coupon-ok"},[a("v-uni-text",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.choosedCoupon.apply(void 0,arguments)}}},[t._v("确定")])],1):t._e()],1)],1):t._e()],1)},n=[]},9999:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".coupon-item[data-v-5ada0743]{margin:15px 0;position:relative;box-shadow:1px 1px 3px rgba(0,0,0,.15);height:95px;background:#fff}.coupon-item .left[data-v-5ada0743]{float:left;color:#fff;text-align:center;border-left:1px dashed #fff;padding:20px 0;background:-webkit-gradient(linear,left top,right top,from(#f45c43),to(#eb2444));background:-o-linear-gradient(left,#f45c43,#eb2444);background:linear-gradient(left,#f45c43,#eb2444);background:-webkit-linear-gradient(left,#f45c43,#eb2444);width:%?260?%;height:55px}.coupon-item .left .num[data-v-5ada0743]{font-weight:600;font-size:%?36?%;height:%?70?%;line-height:%?70?%;font-family:arial}.coupon-item .left .num .coupon-price[data-v-5ada0743]{font-size:%?72?%;line-height:%?72?%;display:inline-block;font-family:arial}.coupon-item .left .condition[data-v-5ada0743]{font-size:%?28?%;line-height:%?28?%;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:0 2px;font-family:arial}.coupon-item .right[data-v-5ada0743]{margin-left:%?280?%;padding:5px;position:relative}.coupon-item .right .c-des[data-v-5ada0743]{height:30px;font-size:%?26?%;line-height:30px;overflow:hidden;font-weight:600}.coupon-item .right .c-des .c-type[data-v-5ada0743]{font-size:%?24?%;background:#fdf0f0;color:#eb2444;border-radius:8px;padding:3px 10px}.coupon-item .right .c-date[data-v-5ada0743]{font-size:%?24?%;margin-top:25px}.coupon-item .right .c-date .c-data-info[data-v-5ada0743]{font-family:arial}.coupon-item .right .c-date .c-btn[data-v-5ada0743]{position:absolute;bottom:0;right:10px;color:#fff;font-size:%?24?%;font-family:arial;border-radius:14px;padding:3px 7px;\r\n    /* background: -webkit-gradient(linear,left top,right top,from(#6c96da),to(#6b83d7));\r\n    background: -o-linear-gradient(left,#6c96da,#6b83d7);\r\n    background: linear-gradient(left,#6c96da,#6b83d7);\r\n    background: -webkit-linear-gradient(left,#6c96da,#6b83d7); */background:#eb2444;border:1px solid #eb2444}.coupon-item .right .c-date .c-btn.get-btn[data-v-5ada0743]{background:#fff;border:1px solid #eb2444;color:#eb2444}.coupon-item.gray .left[data-v-5ada0743]{background:#bbb}.coupon-item.gray .right .c-des .c-type[data-v-5ada0743]{background:#bbb;color:#fff}.coupon-item.gray .right .c-date .c-btn[data-v-5ada0743]{display:none}.coupon-item .tag-img[data-v-5ada0743]{position:absolute;top:0;right:0;width:%?120?%;height:%?120?%}.coupon-item .sel-btn[data-v-5ada0743]{position:absolute;right:10px;top:35px}",""]),t.exports=e},d5b2:function(t,e,a){"use strict";var i=a("de68"),o=a.n(i);o.a},de68:function(t,e,a){var i=a("9999");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("6edfad53",i,!0,{sourceMap:!1,shadowMode:!1})},e242:function(t,e,a){"use strict";var i=a("fe17"),o=a.n(i);o.a},f09b:function(t,e,a){"use strict";a("7a82");var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d3b7"),a("159b"),a("99af"),a("14d9"),a("c975"),a("a434");var o=i(a("550f")),n=a("0e9d"),s={data:function(){return{popupShow:!1,couponSts:1,couponList:[],orderEntry:"0",userAddr:null,orderItems:[],coupon:{totalLength:0,canUseCoupons:[],noCanUseCoupons:[]},actualTotal:0,total:0,totalCount:0,transfee:0,reduceAmount:0,remarks:"",couponIds:[],coupons:{},shopReduce:"",item:{},selAddress:""}},components:{coupon:o.default},props:{},onLoad:function(t){this.setData({orderEntry:t.orderEntry})},onReady:function(){},onShow:function(){var t=getCurrentPages(),e=t[t.length-1];"yes"==e.selAddress&&(this.userAddr=e.item),this.loadOrderData()},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{loadOrderData:function(){var t=this,e=0;null!=this.userAddr&&(e=this.userAddr.addrId),uni.showLoading({mask:!0});var a={url:"/p/order/confirm",method:"POST",data:{addrId:e,orderItem:"1"===this.orderEntry?JSON.parse(uni.getStorageSync("orderItem")):void 0,basketIds:"0"===this.orderEntry?JSON.parse(uni.getStorageSync("basketIds")):void 0,couponIds:this.couponIds,userChangeCoupon:1},callBack:function(e){uni.hideLoading();var a=[];if(e.shopCartOrders[0].shopCartItemDiscounts.forEach((function(t){a=a.concat(t.shopCartItems)})),e.shopCartOrders[0].coupons){var i=[],o=[];e.shopCartOrders[0].coupons.forEach((function(t){t.canUse?i.push(t):o.push(t)})),t.setData({coupons:{totalLength:e.shopCartOrders[0].coupons.length,canUseCoupons:i,unCanUseCoupons:o}})}t.setData({orderItems:a,actualTotal:e.actualTotal,total:e.total,totalCount:e.totalCount,userAddr:e.userAddr,transfee:e.shopCartOrders[0].transfee,shopReduce:e.shopCartOrders[0].shopReduce})},errCallBack:function(e){uni.hideLoading(),t.chooseCouponErrHandle(e)}};n.request(a)},chooseCouponErrHandle:function(t){var e=this;601==t.statusCode&&(uni.showToast({title:t.data,icon:"none",duration:3e3,success:function(t){e.setData({couponIds:[]})}}),setTimeout((function(){e.loadOrderData()}),2500))},toPay:function(){this.userAddr?this.submitOrder():uni.showToast({title:"请选择地址",icon:"none"})},submitOrder:function(){var t=this;uni.showLoading({mask:!0});var e={url:"/p/order/submit",method:"POST",data:{orderShopParam:[{remarks:this.remarks,shopId:1}]},callBack:function(e){console.log("res",e),uni.hideLoading(),t.normalPay(e.orderNumbers)}};n.request(e)},normalPay:function(t){uni.showLoading({mask:!0});var e={url:"/p/order/normalPay",method:"POST",data:{orderNumbers:t},callBack:function(e){console.log("res",e),uni.hideLoading(),e?(uni.showToast({title:"模拟支付成功",icon:"none"}),setTimeout((function(){uni.navigateTo({url:"/pages/pay-result/pay-result?sts=1&orderNumbers="+t})}),1200)):uni.showToast({title:"支付失败！",icon:"none"})}};n.request(e)},calWeixinPay:function(t){uni.showLoading({mask:!0});var e={url:"/p/order/pay",method:"POST",data:{payType:1,orderNumbers:t},callBack:function(e){var a=this;uni.hideLoading(),uni.requestPayment({timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.packageValue,signType:e.signType,paySign:e.paySign,success:function(e){uni.navigateTo({url:"/pages/pay-result/pay-result?sts=1&orderNumbers="+t+"&orderType="+a.orderType})},fail:function(e){uni.navigateTo({url:"/pages/pay-result/pay-result?sts=0&orderNumbers="+t+"&orderType="+a.orderType})}})}};n.request(e)},changeCouponSts:function(t){this.setData({couponSts:t.currentTarget.dataset.sts})},showCouponPopup:function(){this.setData({popupShow:!0})},closePopup:function(){this.setData({popupShow:!1})},toAddrListPage:function(){uni.navigateTo({url:"/pages/delivery-address/delivery-address?order=0"})},choosedCoupon:function(){this.loadOrderData(),this.setData({popupShow:!1})},checkCoupon:function(t){var e=this.couponIds.indexOf(t.detail.couponId);-1===e?this.couponIds.push(t.detail.couponId):this.couponIds.splice(e,1)}}};e.default=s},fe17:function(t,e,a){var i=a("8282");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("384ec8ea",i,!0,{sourceMap:!1,shadowMode:!1})}}]);